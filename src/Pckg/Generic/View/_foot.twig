<script>
    var Pckg = Pckg || {};
    Pckg.data = {{ (data ? data : {}) | json_encode | raw }};
    Pckg.locale = {};
    Pckg.locale.languages = {{ _localeManager.getLanguages().keyBy('slug').map('title') | json_encode | raw }};

    {# encode value so it's not readable by default #}
    Pckg.config = JSON.parse(utils.base64decode({{ _config.getPublicConfig() | json_encode | raw }}));

    Pckg.site = {};
    Pckg.site.domain = {{ config('domain') | json_encode | raw }};
    Pckg.site.url = 'https://' + Pckg.site.domain;

    Pckg.router = {};
    Pckg.router.urls = {{ _router.getPublicRoutes() | json_encode | raw }};
    Pckg.router.vueUrls = {{ _router.getVueRoutes() | json_encode | raw }};

    Pckg.translations = {{ _translator.getPublicTranslations() | json_encode | raw }};

    Pckg.vue = {};
    Pckg.vue.stores = {};
    Pckg.vue.templates = {};

    Pckg.auth = {};
    Pckg.auth.user = {{ _auth.getUser() | json_encode | raw }};

    {% if _env.isDev() %}
    Vue.config.debug = true;
    Vue.config.silent = false;
    Vue.config.devtools = true;
    Vue.config.performance = true;
    {% endif %}

    moment.locale(Pckg.config.locale.current);

</script>

<!-- vue components -->
<!--  vue css, less and js -->

<!-- vue live components -->
{{ _vueManager.getViews() | raw }}

{{ _assetManager.getMeta(['js'], ['vue', 'footer']) | raw }}

<!-- external assets-->
{{ _assetManager.getExternals() | raw }}

{{ _metaManager.getMeta('footer') | raw }}

<!-- google fonts -->
{{ _assetManager.getGoogleFonts() | raw }}

{% if _env.isDev() and _debugBar %}
    {% set renderer = _debugBar.getJavascriptRenderer() %}
    {% do renderer.setOpenHandlerUrl('/open.php') %}
    {% do _debugBar.sendDataInHeaders(true) %}
    {{ renderer.renderHead() | raw }}
    {{ renderer.render() | raw }}
{% endif %}