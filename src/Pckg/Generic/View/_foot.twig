<script>
    var Pckg = Pckg || {};
    Pckg.data = JSON.parse(utils.base64decode('{{ (data ? data : {}) | json_encode | base64_encode | raw }}'));
    Pckg.locale = {};
    Pckg.locale.languages = {{ _localeManager.getLanguages().keyBy('slug').map('title') | json_encode | raw }};

    {# cleanup what should be here and move other settings to stores or fetch them some other way #}
    Pckg.config = JSON.parse(utils.base64decode('{{ _config.getPublicConfig() | raw }}'));

    Pckg.site = {};
    Pckg.site.domain = {{ config('domain') | json_encode | raw }};
    Pckg.site.url = 'https://' + Pckg.site.domain;

    Pckg.router = {};
    {# needed by utils.url, mostly in backend or in pagebuilder - deprecate utils.url? #}
    Pckg.router.urls = JSON.parse(utils.base64decode('{{ _router.getPublicRoutes() | json_encode | base64_encode | raw }}'));
    {# is this even needed? for backend maybe? - check how to lazy load routes? #}
    Pckg.router.vueUrls = JSON.parse(utils.base64decode('{{ _router.getVueRoutes() | json_encode | base64_encode | raw }}'));
    {# there's too much of public translations - see what's used #}
    Pckg.translations = JSON.parse(utils.base64decode('{{ _translator.getPublicTranslations() | json_encode | base64_encode | raw }}'));

    Pckg.vue = {};
    Pckg.vue.stores = {};

    Pckg.auth = {};
    Pckg.auth.user = {{ _auth.getUserDataArray() | json_encode | raw }};

    {% if _env.isDev() %}
    Vue.config.debug = true;
    Vue.config.silent = false;
    Vue.config.devtools = true;
    Vue.config.performance = true;
    {% endif %}

    if (Pckg.config.locale && typeof moment !== 'undefined') {
        moment.locale(Pckg.config.locale.current);
    }

</script>

{{ _vueManager.getViews() | raw }}

{{ _assetManager.getMeta(['js'], ['vue', 'footer']) | raw }}

{{ _metaManager.getMeta('footer') | raw }}

<!-- external assets-->
{{ _assetManager.getExternals() | raw }}

<!-- google fonts -->
{{ _assetManager.getGoogleFonts() | raw }}

{% if _env.isDev() and _debugBar %}
    {% set renderer = _debugBar.getJavascriptRenderer() %}
    {% do renderer.setOpenHandlerUrl('/open.php') %}
    {% do _debugBar.sendDataInHeaders(true) %}
    {{ renderer.renderHead() | raw }}
    {{ renderer.render() | raw }}
{% endif %}