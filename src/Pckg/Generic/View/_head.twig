{% do _metaManager.addViewport() %}
{% do _metaManager.addContentType() %}

{{ _gtmManager | raw }}

{{ _metaManager.getMeta('header.first') | raw }}

{{ _seoManager | raw }}

{{ _metaManager.getMeta('header') | raw }}

<!-- libraries css, less and js -->
{{ _assetManager.getMeta(['css', 'less', 'js'], ['libraries']) | raw }}

<!-- main css, less and js -->
{{ _assetManager.getMeta(['css', 'less', 'js'], ['main']) | raw }}

<!-- external assets-->
{{ _assetManager.getExternals() | raw }}

<!-- vue components -->
{{ _vueManager.getComponents() | raw }}

<!-- vue filters -->
{{ _vueManager.getFilters() | raw }}

<!-- google fonts -->
{{ _assetManager.getGoogleFonts() | raw }}

<!--  vue css, less and js -->
{{ _assetManager.getMeta(['css', 'less', 'js'], ['vue']) | raw }}

<!-- vue live components -->
{{ _vueManager.getViews() | raw }}

<script>
    var Pckg = Pckg || {};
    Pckg.config = {};
    Pckg.config.locale = {
        current: '{{ _localeManager.getCurrent() }}',
        decimals: {{ config('pckg.locale.decimals', 2) }},
        format: {
            dateMoment: 'LL',
            timeMoment: 'LT'
        },
        currency: '{{ config('pckg.payment.currency', 'EUR') }}',
        currencySign: '{{ config('pckg.payment.currencySign', 'â‚¬') }}'
    };
    Pckg.config.editor = {};
    Pckg.config.editor.variables = {{ config('pckg.dynamic.editor.variables') | json_encode | raw }};

    Pckg.router = {};
    Pckg.router.urls = {
        'derive.user.profile': '{{ url('derive.user.profile') }}',
        'api.auth.loginStatus': '{{ url('api.auth.loginStatus') }}',
        'pckg.generic.pageStructure.initialFetch': '{{ url('pckg.generic.pageStructure.initialFetch') }}',
        'pckg.generic.pageStructure.actionsMorph': '{{ url('pckg.generic.pageStructure.actionsMorph') }}',
        'pckg.generic.pageStructure.actionsMorph.addPartial': '{{ url('pckg.generic.pageStructure.actionsMorph.addPartial') }}',
        'pckg.generic.pageStructure.actionsMorphSettings': '{{ url('pckg.generic.pageStructure.actionsMorphSettings') }}',
        'pckg.generic.pageStructure.actionsMorphContent': '{{ url('pckg.generic.pageStructure.actionsMorphContent') }}',
        'pckg.generic.pageStructure.duplicateActionsMorphContent': '{{ url('pckg.generic.pageStructure.duplicateActionsMorphContent') }}',
        'pckg.generic.pageStructure.createActionsMorphContent': '{{ url('pckg.generic.pageStructure.createActionsMorphContent') }}',
        'pckg.generic.pageStructure.content': '{{ url('pckg.generic.pageStructure.content') }}',
        'pckg.generic.pageStructure.actionsMorphBackgroundImage': '{{ url('pckg.generic.pageStructure.actionsMorphBackgroundImage') }}'
    };

    Pckg.translations = {
        'pckg.htmlbuilder.btn.viewRecord': '{{ __('pckg.htmlbuilder.btn.viewRecord') }}',
        'pckg.htmlbuilder.btn.toList': '{{ __('pckg.htmlbuilder.btn.toList') }}',
        'pckg.htmlbuilder.btn.refreshList': '{{ __('pckg.htmlbuilder.btn.refreshList') }}'
    };

    {% if _env.isDev() %}
    Vue.config.debug = true;
    Vue.config.silent = false;
    Vue.config.devtools = true;
    {% endif %}

    Vue.filter('price', function (price, decimals) {
        return locale.price(price, decimals);
    });

    Vue.filter('roundPrice', function (price, decimals) {
        return locale.roundPrice(price, decimals);
    });

    Vue.filter('date', function (date, format) {
        return locale.date(date, format);
    });

    Vue.filter('datetime', function (date, format) {
        return locale.datetime(date, format);
    });

    Vue.filter('ucfirst', function (string) {
        if (!string) {
            return '';
        }

        return string.charAt(0).toUpperCase() + string.slice(1);
    });
</script>

{{ _metaManager.getMeta('headerLast') | raw }}