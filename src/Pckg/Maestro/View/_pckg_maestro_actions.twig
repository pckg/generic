<script type="text/x-template" id="pckg-maestro-actions">
    <div class="btn-group btn-group-sm">
        <div type="button" class="btn btn-default">
            {% for action in recordActions %}
                {% include 'tabelize/recordActions/' ~ (action.template ? action.template : (action.slug ? action.slug : action)) ~ '.twig' %}
            {% endfor %}
        </div>
        {% if recordActions|length > 1 %}
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false">
                <span class="caret"></span>
                <span class="sr-only">Toggle Dropdown</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-right">
                {% for action in recordActions %}
                    <li>{% include 'tabelize/recordActions/' ~ (action.template ? action.template : (action.slug ? action.slug : action)) ~ '.twig' %}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
</script>

<script type="text/javascript">
    var pckgMaestroActions = Vue.component('pckg-maestro-actions', {
        name: 'pckg-maestro-actions',
        template: '#pckg-maestro-actions',
        props: {
            record: {
                type: Object,
                required: true
            }
        },
        methods: {
            recordAction: function (record, action) {
                console.log('dispatching record:' + action);
                // data.$root.$dispatch('record:' + action, record.id, record);
                utils.lastVue.$dispatch('record:' + action, record.id, record);
            }
        }
    });
</script>